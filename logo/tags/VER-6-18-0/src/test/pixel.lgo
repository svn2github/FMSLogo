LOAD "testlib.lgo


TO SETPIXELTEST.SMOKETEST

   TRACEINSTRUCTION [ SETPIXEL 5 ]
   SIMPLEREPORTTEST [ PIXEL ]  5

   TRACEINSTRUCTION [ SETPIXEL [255 255 255] ]
   SIMPLEREPORTTEST [ PIXEL  ] [255 255 255] 

   TRACEINSTRUCTION [ SETPIXEL [255 0 0] ]
   SIMPLEREPORTTEST [ PIXEL  ] [255 0 0] 

   TRACEINSTRUCTION [ SETPIXEL [0 255 0] ]
   SIMPLEREPORTTEST [ PIXEL  ] [0 255 0] 

   TRACEINSTRUCTION [ SETPIXEL [0 0 255] ]
   SIMPLEREPORTTEST [ PIXEL  ] [0 0 255] 

   ; SETPIXEL truncates floating-point input
   TRACEINSTRUCTION [ SETPIXEL 5.9 ]
   SIMPLEREPORTTEST [ PIXEL ]  5

END

TO SETPIXELTEST.BADINPUT

   RUNNOTENOUGHINPUTSTEST [(SETPIXEL)]
   RUNTOOMANYINPUTSTEST   [(SETPIXEL 5 "toomany)]

   RUNBADINPUTTEST [ SETPIXEL "word             ]
   RUNBADINPUTTEST [ SETPIXEL [255]             ]
   RUNBADINPUTTEST [ SETPIXEL [255 255]         ]
   RUNBADINPUTTEST [ SETPIXEL [255 255 255 255] ]
   RUNBADINPUTTEST [ SETPIXEL {255 255 255}     ]

END


TO PIXELTEST.SMOKETEST

   ; draw a pixel and get it
   TRACEINSTRUCTION [ SETPENCOLOR 5 ]
   TRACEINSTRUCTION [ FORWARD     1 ]
   TRACEINSTRUCTION [ BACK        1 ]
   SIMPLEREPORTTEST [ PIXEL ]     5

   ; draw a pixel and get it
   TRACEINSTRUCTION [ SETPENCOLOR [255 255 255] ]
   TRACEINSTRUCTION [ FORWARD     1 ]
   TRACEINSTRUCTION [ BACK        1 ]
   SIMPLEREPORTTEST [ PIXEL ]     [255 255 255]

END

TO PIXELTEST.BADINPUT

   RUNTOOMANYINPUTSTEST    [(PIXEL "toomany)]

END

TO PIXELTEST

  SETPIXELTEST.SMOKETEST
  SETPIXELTEST.BADINPUT

  PIXELTEST.SMOKETEST
  PIXELTEST.BADINPUT

END
